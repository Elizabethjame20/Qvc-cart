<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QVC-cart | Online Store</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; margin: 0; padding: 0; }
    header { background: #ff4500; color: #fff; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
    nav a { color: #fff; margin: 0 10px; text-decoration: none; font-weight: bold; }
    .hero { padding: 20px; text-align: center; }
    .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 20px; }
    .product-card { background: #fff; border-radius: 8px; padding: 15px; text-align: center; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .product-card img { max-width: 100%; border-radius: 5px; }
    .add-to-cart { margin-top: 10px; background: #ff4500; color: #fff; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
    .payment img { height: 30px; margin: 5px; }
    footer { text-align: center; padding: 15px; background: #222; color: #fff; margin-top: 30px; }
  </style>
</head>
<body>

  <header>
    <div><img src="qvc-cart-logo.png" alt="Logo" style="height:40px;"></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="cart.html">Cart (<span id="cart-count">0</span>)</a>
      <a href="#products">Products</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <div class="hero">
    <h1>Welcome to QVC-cart</h1>
    <p>Shop electronics, phones (new & used), clothes, and more.</p>
    <p>Select items and pay 50% upfront using PayPal or Cash App.</p>
  </div>

  <!-- Live Products from Google Sheet -->
  <section id="products">
    <div id="product-list" class="product-grid"></div>
  </section>

  <footer>
    &copy; 2024 QVC-cart. All rights reserved.
  </footer>

  <!-- Load Products from Google Sheets -->
  <script>
    const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTd_TVn6MgWEsX7xln2sRQT9BDhzxv8cqALRweLLLu7iU1EAnJkrcQ33BaCJ-d1RE_IyUHH3JPKD_0y/pub?output=csv";

    fetch(sheetURL)
      .then(res => res.text())
      .then(data => {
        const rows = data.split("\n").slice(1);
        const productList = document.getElementById("product-list");

        rows.forEach(row => {
          const [name, price, image, category] = row.split(",");
          if (!name || !price || !image) return;

          const card = document.createElement("div");
          card.className = "product-card";
          card.innerHTML = `
            <img src="${image.trim()}" alt="${name}" />
            <h3>${name}</h3>
            <p>â‚¦${parseInt(price).toLocaleString()}</p>
            <div class="payment">
              <strong>Pay with:</strong><br>
              <img src="paypal.png" alt="PayPal">
              <img src="cashapp.png" alt="Cash App">
            </div>
            <button class="add-to-cart" data-name="${name}" data-price="${price}">Add to Cart</button>
          `;
          productList.appendChild(card);
        });

        setupCartButtons();
      });

    // Cart Handling
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function updateCartCounter() {
      const count = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById("cart-count").innerText = count;
      localStorage.setItem("cart", JSON.stringify(cart));
    }

    function setupCartButtons() {
      document.querySelectorAll(".add-to-cart").forEach(button => {
        button.addEventListener("click", () => {
          const name = button.dataset.name;
          const price = parseInt(button.dataset.price);
          const existing = cart.find(item => item.name === name);
          if (existing) {
            existing.quantity += 1;
          } else {
            cart.push({ name, price, quantity: 1 });
          }
          updateCartCounter();
          alert(`${name} added to cart.`);
        });
      });

      updateCartCounter();
    }
  </script>
</body>
</html>
